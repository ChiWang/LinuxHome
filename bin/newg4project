#! /bin/bash
#=====================================================================
#   File:   newg4project
#   Author: Chi WANG  (chiwang@mail.ustc.edu.cn)    06/09/2013
#---------------------------------------------------------------------
#   Description:
#
#       Useage:     newg4project projectName
#---------------------------------------------------------------------
#   History:
#                           Last update:  13/12/2013   14:01:16
#=====================================================================

#+ usage
if [ $# == 1 ];then
  echo "    Setting up geant4 project \"$1\"" 
else
  echo "    Usage:  newg4project projectName"
  exit
fi
#+

#+ setup
mkdir include src mac  2>/dev/null
path="$HOME/share/common/Geant4Template"
cp -r $path/analysis    ./
cp -r $path/database    ./
cp -r $path/mac    ./
cp ${path}/../SConstruct ./
cp ${path}/../SConscript ./src/
cp $path/Makefile       ./Makefile

for subdir in include src;do
  for file in `ls ${path}/${subdir}`;do
    name=`echo ${file/MyX/$1}`
    cp ${path}/${subdir}/${file} ./${subdir}/${name}
  done
done
sed "s/MyX/$1/g" -i ./${subdir}/*
sed "s/MyX/$1/g" -i ./Makefile 
ln -s ./src/$1.cc ./
#+

#+ Readme.md --> the same name as github
if [ -f Readme.md ];then
    read -p "   Readme.md is exist, do you want to create a new one {yes|no}?:      "   ans
fi
if [ "XXX$ans" != "XXXno" ]; then
    echo "">Readme.md
    echo "              Geant4 Project:     $1"                  >>Readme.md
    echo "      ======================================================"  >>Readme.md
    echo "          By: $AUTHOR ($AUTHOREMAIL)  `date +%d/%m/%Y`">>Readme.md
    echo "">>Readme.md
    echo "Description"  >>Readme.md
    echo "--------------"  >>Readme.md
    echo "">>Readme.md
    echo "">>Readme.md
    more ${path}/README.md >>Readme.md
    sed "s/MyX/$1/g" -i Readme.md
fi
#+



